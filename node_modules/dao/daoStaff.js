
	exports.create = function(mongo) {
		
		var	Schema		= mongo.Schema,
			ObjectId	= Schema.ObjectId;
			
		var userSchema	= new Schema({
			id			: ObjectId,
			name		: String,
			nick		: String,
			email		: String,
			pass		: String,
			velocity	: Number,
			positionY	: Number,
			positionX	: Number,
			height		: Number,
			width		: Number,
				nav		: {
				positionY	: Number,
				positionX	: Number,
				height		: Number,
				width		: Number
			}
		});
		
		var User = mongo.model('User',userSchema);
		
		return {
			insert: function(req,res) {
				var user = new User();
				
				user.name			= req.body.name;
				user.nick			= req.body.nick;
				user.email			= req.body.email;
				user.pass			= req.body.pass;
				user.velocity		= 5;
				user.positionY		= 0;
				user.positionX		= 0;
				user.height			= 50;
				user.width			= 50;
				user.nav.positionY	= 0;
				user.nav.positionX	= 0;
				user.nav.height		= 768;
				user.nav.width		= 1024;
				
				user.save(function() {
					console.log("SALVOOOOOOOOOOOOOOOOO");
					
					res.redirect('/');
				});
			},
			
			selectLogin: function(req,res,socket) {
				var email	= req.body.email,
					pass	= req.body.pass;

				//var email	= "paivasm@hotmail.com";//req.body.email,
				//	pass	= "123";//req.body.pass;

				User.findOne({"email" : email}, function(err, coll) {
					
					console.log(err);
					
					if(pass === coll.pass) {
						res.render('admin/admin',{ title: 'Admin meWorls' });
						socket.getColl(coll);
					} else {
						res.render('admin/login-admin',{ title: 'Admin meWorls' });
					}
				});
			},

			selectUpdate: function(req,res) {

			},

			update: function(req,res) {

			}
		}
	}